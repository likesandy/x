(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]||[]).push([["0438a5ac"],{"0438a5ac":function(n,e,t){"use strict";t.d(e,"__esModule",{value:!0}),t.d(e,"default",{enumerable:!0,get:function(){return l;}});var s=t("777fffbe"),o=t("8090cfc0"),i=t("3a2876c3"),a=s._(t("b710171f")),r=t("3e6b097d"),l=function(){return(0,o.jsx)(i.DumiPage,{children:(0,o.jsx)(r.Suspense,{fallback:(0,o.jsx)(a.default,{}),children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.DumiDemo,{demo:{id:"docs-playground-agent-tbox-demo-agent-tbox"},previewerProps:{title:"Tbox X Agent",compact:!0,iframe:"600",filename:"docs/playground/agent-tbox.tsx",pkgDependencyList:{"@ant-design/tools":"^19.0.2","@ant-design/v5-patch-for-react-19":"^1.0.3","@antv/gpt-vis":"^0.5.2","@biomejs/biome":"^2.0.5","@codecov/webpack-plugin":"^1.4.0","@codesandbox/sandpack-react":"^2.19.8","@emotion/react":"^11.13.5","@emotion/server":"^11.11.0","@happy-dom/jest-environment":"^18.0.1","@ianvs/prettier-plugin-sort-imports":"^4.3.1","@madccc/duplicate-package-checker-webpack-plugin":"^1.0.0","@microflash/rehype-figure":"^2.1.1","@npmcli/run-script":"^9.0.1","@octokit/rest":"^21.0.2","@petercatai/assistant":"^2.0.13","@prettier/sync":"^0.6.1","@qixian.cs/github-contributors-list":"^2.0.2","@rc-component/father-plugin":"^2.0.4","@rc-component/np":"^1.0.3","@rc-component/trigger":"^2.2.3","@size-limit/file":"^11.1.5","@stackblitz/sdk":"^1.11.0","@testing-library/dom":"^10.4.0","@testing-library/jest-dom":"^6.5.0","@testing-library/react":"^16.0.1","@testing-library/user-event":"^14.5.2","@types/adm-zip":"^0.5.5","@types/ali-oss":"^6.16.11","@types/cli-progress":"^3.11.6","@types/fs-extra":"^11.0.4","@types/gtag.js":"^0.0.20","@types/http-server":"^0.12.4","@types/inquirer":"^9.0.7","@types/isomorphic-fetch":"^0.0.39","@types/jest":"^29.5.13","@types/jest-axe":"^3.5.9","@types/jest-environment-puppeteer":"^5.0.6","@types/jest-image-snapshot":"^6.4.0","@types/jquery":"^3.5.30","@types/jsdom":"^21.1.7","@types/lodash":"^4.17.7","@types/markdown-it":"^14.1.2","@types/minimist":"^1.2.5","@types/node":"^24.0.3","@types/ora":"^3.2.0","@types/pixelmatch":"^5.2.6","@types/pngjs":"^6.0.5","@types/prismjs":"^1.26.4","@types/progress":"^2.0.7","@types/qs":"^6.9.16","@types/react":"^19.0.2","@types/react-copy-to-clipboard":"^5.0.7","@types/react-dom":"^19.0.2","@types/react-highlight-words":"^0.20.0","@types/react-resizable":"^3.0.8","@types/semver":"^7.5.8","@types/spinnies":"^0.5.3","@types/tar":"^6.1.13","@types/throttle-debounce":"^5.0.2","@types/warning":"^3.0.3","@umijs/fabric":"^4.0.1","adm-zip":"^0.5.16","ali-oss":"^6.21.0",antd:"^5.25.1","antd-style":"^3.6.3","antd-token-previewer":"^2.0.8",axios:"^1.7.7",browserslist:"^4.23.3","browserslist-to-esbuild":"^2.1.1",chalk:"^5.4.1",cheerio:"^1.0.0","circular-dependency-plugin":"^5.2.2","cli-progress":"^3.12.0","copy-to-clipboard":"^3.3.3","cross-env":"^10.0.0","cross-fetch":"^4.0.0",crypto:"^1.0.1",dayjs:"^1.11.13",dekko:"^0.2.1",dumi:"^2.4.17","dumi-plugin-color-chunk":"^1.1.2","esbuild-loader":"^4.2.2","fast-glob":"^3.3.2",father:"^4.5.4","fetch-jsonp":"^1.3.0","fs-extra":"^11.2.0","gh-pages":"^6.1.1",glob:"^11.0.0","happy-dom":"^18.0.1",html2sketch:"^1.0.2","http-server":"^14.1.1",husky:"^9.1.6","identity-obj-proxy":"^3.0.0",immer:"^10.1.1",inquirer:"^12.1.0","is-ci":"^4.1.0","isomorphic-fetch":"^3.0.0",jest:"^30.0.3","jest-axe":"^10.0.0","jest-canvas-mock":"^2.5.2","jest-environment-node":"^30.0.0","jest-image-snapshot":"^6.4.0","jest-puppeteer":"^11.0.0",jquery:"^3.7.1",jsdom:"^26.0.0","jsonml-to-react-element":"^1.1.11","jsonml.js":"^0.1.0","lint-staged":"^16.1.2",lodash:"^4.17.21","lottie-web":"^5.12.2","lunar-typescript":"^1.7.5","lz-string":"^1.5.0","markdown-it":"^14.1.0",minimist:"^1.2.8",mockdate:"^3.0.5","node-fetch":"^3.3.2","node-notifier":"^10.0.1",open:"^10.1.0",ora:"^8.1.0",pixelmatch:"^7.1.0",pngjs:"^7.0.0",prettier:"^3.3.3","prettier-plugin-jsdoc":"^1.3.0","pretty-format":"^30.0.0",prismjs:"^1.29.0",puppeteer:"^24.0.0",qs:"^6.13.0","rc-drawer":"^8.0.0","rc-footer":"^0.6.8","rc-resize-observer":"^1.4.0","rc-virtual-list":"^3.14.5",react:"^19.0.0","react-copy-to-clipboard":"^5.1.0","react-dom":"^19.0.0","react-highlight-words":"^0.20.0","react-infinite-scroll-component":"^6.1.0","react-intersection-observer":"^9.13.1","react-intl":"^7.1.11","react-resizable":"^3.0.5","react-router-dom":"^7.0.1","react-sticky-box":"^2.0.5","regenerator-runtime":"^0.14.1","rehype-stringify":"^10.0.0",remark:"^15.0.1","remark-cli":"^12.0.1","remark-gfm":"^4.0.0","remark-lint":"^10.0.0","remark-lint-no-undefined-references":"^5.0.0","remark-preset-lint-recommended":"^7.0.0","remark-rehype":"^11.1.0","scroll-into-view-if-needed":"^3.1.0",semver:"^7.6.3",sharp:"^0.34.3","simple-git":"^3.26.0","size-limit":"^11.1.5",spinnies:"^0.5.1",tar:"^7.4.3",tsx:"^4.19.1",typedoc:"^0.28.0",typescript:"~5.8.2","vanilla-jsoneditor":"^3.0.0","web-streams-polyfill":"^4.0.0",webpack:"^5.94.0","webpack-bundle-analyzer":"^4.10.2","@ant-design/colors":"^7.1.0","@ant-design/cssinjs":"^1.21.1","@ant-design/cssinjs-utils":"^1.1.0","@ant-design/fast-color":"^2.0.6","@ant-design/icons":"^5.4.0","@babel/runtime":"^7.25.6",classnames:"^2.5.1","rc-motion":"^2.9.2","rc-util":"^5.43.0","tbox-nodejs-sdk":"^0.0.13"},pkgPeerDependencies:{antd:"^5.20.3",react:">=18.0.0","react-dom":">=18.0.0"},jsx:"var __awaiter =\n  (this && this.__awaiter) ||\n  function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P\n        ? value\n        : new P(function (resolve) {\n            resolve(value);\n          });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator['throw'](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\nvar _a, _b, _c;\nimport {\n  AppstoreAddOutlined,\n  CopyOutlined,\n  DeleteOutlined,\n  DislikeOutlined,\n  EditOutlined,\n  EllipsisOutlined,\n  FileSearchOutlined,\n  HeartOutlined,\n  LikeOutlined,\n  PlusOutlined,\n  ProductOutlined,\n  QuestionCircleOutlined,\n  ReloadOutlined,\n  ScheduleOutlined,\n  ShareAltOutlined,\n  SmileOutlined,\n} from '@ant-design/icons';\nimport {\n  Bubble,\n  Conversations,\n  Prompts,\n  Sender,\n  useXAgent,\n  useXChat,\n  Welcome,\n} from '@ant-design/x';\nimport { Avatar, Button, Flex, message, Space, Spin } from 'antd';\nimport { createStyles } from 'antd-style';\nimport dayjs from 'dayjs';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { TboxClient } from 'tbox-nodejs-sdk';\nconst tboxClient = new TboxClient({\n  httpClientConfig: {\n    authorization: 'your-api-key', // Replace with your API key\n    isAntdXDemo: true, // Only for Ant Design X demo\n  },\n});\nconst zhCN = {\n  whatIsTbox: '\u4EC0\u4E48\u662F\u767E\u5B9D\u7BB1 Tbox.cn?',\n  whatCanTboxDo: '\u767E\u5B9D\u7BB1\u53EF\u4EE5\u505A\u4EC0\u4E48?',\n  today: '\u4ECA\u5929',\n  yesterday: '\u6628\u5929',\n  hotTopics: '\u6700\u70ED\u8BDD\u9898',\n  designGuide: '\u8BBE\u8BA1\u6307\u5357',\n  intent: '\u610F\u56FE',\n  role: '\u89D2\u8272',\n  aiUnderstandsUserNeeds: 'AI \u7406\u89E3\u7528\u6237\u9700\u6C42\u5E76\u63D0\u4F9B\u89E3\u51B3\u65B9\u6848',\n  aiPublicImage: 'AI \u7684\u516C\u4F17\u5F62\u8C61',\n  dynamic: '\u52A8\u6001',\n  component: '\u7EC4\u4EF6',\n  guide: '\u6307\u5357',\n  tutorial: '\u6559\u7A0B',\n  newConversation: '\u65B0\u4F1A\u8BDD',\n  rename: '\u91CD\u547D\u540D',\n  delete: '\u5220\u9664',\n  requestInProgress: '\u8BF7\u6C42\u6B63\u5728\u8FDB\u884C\u4E2D\uFF0C\u8BF7\u7B49\u5F85\u8BF7\u6C42\u5B8C\u6210\u3002',\n  demoButtonNoFunction: '\u6F14\u793A\u6309\u94AE\uFF0C\u65E0\u5B9E\u9645\u529F\u80FD',\n  helloAntdXTboxAgent: '\u4F60\u597D\uFF0C \u6211\u662F Ant Design X & \u767E\u5B9D\u7BB1\u667A\u80FD\u4F53',\n  antdXTboxDescription:\n    '\u57FA\u4E8E Ant Design \u7684 AGI \u4EA7\u54C1\u754C\u9762\u89E3\u51B3\u65B9\u6848\uFF0C\u6253\u9020\u66F4\u5353\u8D8A\u7684\u667A\u80FD\u89C6\u89C9\u4F53\u9A8C\uFF0C\u96C6\u6210\u4E86\u767E\u5B9D\u7BB1 Tbox.cn \u7684\u667A\u80FD\u4F53\u80FD\u529B\uFF0C\u52A9\u529B\u4EA7\u54C1\u8BBE\u8BA1\u4E0E\u5F00\u53D1\u3002',\n  askMeAnything: '\u5411\u6211\u63D0\u95EE\u5427',\n  loadingMessage: '\u52A0\u8F7D\u4E2D\u{1F497}',\n};\nconst enUS = {\n  whatIsTbox: 'What is Tbox.cn?',\n  whatCanTboxDo: 'What can Tbox.cn do?',\n  today: 'Today',\n  yesterday: 'Yesterday',\n  hotTopics: 'Hot Topics',\n  designGuide: 'Design Guide',\n  intent: 'Intent',\n  role: 'Role',\n  aiUnderstandsUserNeeds: 'AI understands user needs and provides solutions',\n  aiPublicImage: \"AI's public image\",\n  dynamic: 'Dynamic',\n  component: 'Component',\n  guide: 'Guide',\n  tutorial: 'Tutorial',\n  newConversation: 'New Conversation',\n  rename: 'Rename',\n  delete: 'Delete',\n  requestInProgress: 'Request is in progress, please wait for the request to complete.',\n  demoButtonNoFunction: 'Demo button, no actual function',\n  helloAntdXTboxAgent: 'Hello, I am Ant Design X & Tbox Agent',\n  antdXTboxDescription:\n    'An AGI product interface solution based on Ant Design, creating a superior intelligent visual experience, integrating the capabilities of Tbox.cn agents to assist in product design and development.',\n  askMeAnything: 'Ask me anything...',\n  loadingMessage: 'Loading...',\n};\nconst isZhCN =\n  (_c =\n    (_b = (_a = window.parent) === null || _a === void 0 ? void 0 : _a.location) === null ||\n    _b === void 0\n      ? void 0\n      : _b.pathname) === null || _c === void 0\n    ? void 0\n    : _c.includes('-cn');\nconst t = isZhCN ? zhCN : enUS;\nconst DEFAULT_CONVERSATIONS_ITEMS = [\n  {\n    key: 'default-0',\n    label: t.whatIsTbox,\n    group: t.today,\n  },\n  {\n    key: 'default-2',\n    label: t.whatCanTboxDo,\n    group: t.yesterday,\n  },\n];\nconst HOT_TOPICS = {\n  key: '1',\n  label: t.hotTopics,\n  children: [\n    {\n      key: '1-1',\n      description: t.whatIsTbox,\n      icon: <span style={{ color: '#f93a4a', fontWeight: 700 }}>1</span>,\n    },\n    {\n      key: '1-2',\n      description: t.whatCanTboxDo,\n      icon: <span style={{ color: '#ff6565', fontWeight: 700 }}>2</span>,\n    },\n  ],\n};\nconst DESIGN_GUIDE = {\n  key: '2',\n  label: t.designGuide,\n  children: [\n    {\n      key: '2-1',\n      icon: <HeartOutlined />,\n      label: t.intent,\n      description: t.aiUnderstandsUserNeeds,\n    },\n    {\n      key: '2-2',\n      icon: <SmileOutlined />,\n      label: t.role,\n      description: t.aiPublicImage,\n    },\n  ],\n};\nconst SENDER_PROMPTS = [\n  {\n    key: '1',\n    description: t.dynamic,\n    icon: <ScheduleOutlined />,\n  },\n  {\n    key: '2',\n    description: t.component,\n    icon: <ProductOutlined />,\n  },\n  {\n    key: '3',\n    description: t.guide,\n    icon: <FileSearchOutlined />,\n  },\n  {\n    key: '4',\n    description: t.tutorial,\n    icon: <AppstoreAddOutlined />,\n  },\n];\nconst useStyle = createStyles(({ token, css }) => {\n  return {\n    layout: css`\n      width: 100%;\n      min-width: 1000px;\n      height: 100vh;\n      display: flex;\n      background: ${token.colorBgContainer};\n      font-family: AlibabaPuHuiTi, ${token.fontFamily}, sans-serif;\n    `,\n    // sider \u6837\u5F0F\n    sider: css`\n      background: ${token.colorBgLayout}80;\n      width: 280px;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      padding: 0 12px;\n      box-sizing: border-box;\n    `,\n    logo: css`\n      display: flex;\n      align-items: center;\n      justify-content: start;\n      padding: 0 24px;\n      box-sizing: border-box;\n      gap: 8px;\n      margin: 24px 0;\n\n      span {\n        font-weight: bold;\n        color: ${token.colorText};\n        font-size: 16px;\n      }\n    `,\n    addBtn: css`\n      background: #1677ff0f;\n      border: 1px solid #1677ff34;\n      height: 40px;\n    `,\n    conversations: css`\n      flex: 1;\n      overflow-y: auto;\n      margin-top: 12px;\n      padding: 0;\n\n      .ant-conversations-list {\n        padding-inline-start: 0;\n      }\n    `,\n    siderFooter: css`\n      border-top: 1px solid ${token.colorBorderSecondary};\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    `,\n    // chat list \u6837\u5F0F\n    chat: css`\n      height: 100%;\n      width: 100%;\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: column;\n      padding-block: ${token.paddingLG}px;\n      gap: 16px;\n    `,\n    chatPrompt: css`\n      .ant-prompts-label {\n        color: #000000e0 !important;\n      }\n      .ant-prompts-desc {\n        color: #000000a6 !important;\n        width: 100%;\n      }\n      .ant-prompts-icon {\n        color: #000000a6 !important;\n      }\n    `,\n    chatList: css`\n      flex: 1;\n      overflow: auto;\n    `,\n    loadingMessage: css`\n      background-image: linear-gradient(90deg, #ff6b23 0%, #af3cb8 31%, #53b6ff 89%);\n      background-size: 100% 2px;\n      background-repeat: no-repeat;\n      background-position: bottom;\n    `,\n    placeholder: css`\n      padding-top: 32px;\n    `,\n    // sender \u6837\u5F0F\n    sender: css`\n      width: 100%;\n      max-width: 700px;\n      margin: 0 auto;\n    `,\n    speechButton: css`\n      font-size: 18px;\n      color: ${token.colorText} !important;\n    `,\n    senderPrompt: css`\n      width: 100%;\n      max-width: 700px;\n      margin: 0 auto;\n      color: ${token.colorText};\n    `,\n  };\n});\nconst Independent = () => {\n  const { styles } = useStyle();\n  const streamRef = useRef(null); // \u5B58\u50A8 tbox stream \u5BF9\u8C61\n  const abortControllerRef = useRef(null); // \u5B58\u50A8 AbortController\n  // ==================== State ====================\n  const [messageHistory, setMessageHistory] = useState({});\n  const [conversations, setConversations] = useState(DEFAULT_CONVERSATIONS_ITEMS);\n  const [curConversation, setCurConversation] = useState(DEFAULT_CONVERSATIONS_ITEMS[0].key);\n  const [inputValue, setInputValue] = useState('');\n  /**\n   * \u{1F514} Please replace the BASE_URL, PATH, MODEL, API_KEY with your own values.\n   */\n  // ==================== Runtime ====================\n  const [agent] = useXAgent({\n    request: (_a, _b) =>\n      __awaiter(\n        void 0,\n        [_a, _b],\n        void 0,\n        function* ({ message }, { onUpdate, onSuccess, onError, onStream }) {\n          const stream = tboxClient.chat({\n            appId: 'your-app-id', // Replace with your app ID\n            query: message.content,\n            userId: 'antd-x',\n          });\n          streamRef.current = stream;\n          const abortController = new AbortController();\n          const originalAbort = abortController.abort.bind(abortController);\n          abortController.abort = () => {\n            stream.abort();\n            originalAbort();\n          };\n          onStream === null || onStream === void 0 ? void 0 : onStream(abortController);\n          const dataArr = [];\n          stream.on('data', data => {\n            var _a;\n            let parsedPayload;\n            try {\n              const payload =\n                ((_a = data.data) === null || _a === void 0 ? void 0 : _a.payload) || '{}';\n              parsedPayload = JSON.parse(payload);\n            } catch (e) {\n              console.error('Failed to parse payload:', e);\n              return;\n            }\n            if (parsedPayload === null || parsedPayload === void 0 ? void 0 : parsedPayload.text) {\n              dataArr.push(parsedPayload.text);\n              onUpdate(parsedPayload.text);\n            }\n          });\n          stream.on('error', error => {\n            onError(error);\n          });\n          stream.on('end', () => {\n            onSuccess(dataArr);\n          });\n          stream.on('abort', () => {\n            onSuccess(dataArr);\n          });\n        },\n      ),\n  });\n  const loading = agent.isRequesting();\n  const { onRequest, messages, setMessages } = useXChat({\n    agent,\n    requestPlaceholder: () => {\n      return {\n        content: t.loadingMessage,\n        role: 'assistant',\n      };\n    },\n    requestFallback: (_, { error }) => {\n      if (error.name === 'AbortError') {\n        return {\n          content: 'Request is aborted',\n          role: 'assistant',\n        };\n      }\n      return {\n        content: 'Request failed, please try again!',\n        role: 'assistant',\n      };\n    },\n    transformMessage: info => {\n      const { originMessage, chunk } = info || {};\n      if (!chunk) {\n        return {\n          content:\n            (originMessage === null || originMessage === void 0 ? void 0 : originMessage.content) ||\n            '',\n          role: 'assistant',\n        };\n      }\n      const content =\n        (originMessage === null || originMessage === void 0 ? void 0 : originMessage.content) || '';\n      return {\n        content: content + chunk,\n        role: 'assistant',\n      };\n    },\n    resolveAbortController: controller => {\n      // \u5B58\u50A8\u4F20\u5165\u7684 controller\uFF0C\u8FD9\u4E2A\u5DF2\u7ECF\u5305\u88C5\u4E86 stream.abort() \u65B9\u6CD5\n      abortControllerRef.current = controller;\n    },\n  });\n  // ==================== Event ====================\n  const onSubmit = val => {\n    if (!val) return;\n    if (loading) {\n      message.error('Request is in progress, please wait for the request to complete.');\n      return;\n    }\n    onRequest({\n      stream: true,\n      message: { role: 'user', content: val },\n    });\n  };\n  const onFooterButtonClick = () => {\n    message.info(t.demoButtonNoFunction);\n  };\n  // ==================== Nodes ====================\n  const chatSider = (\n    <div className={styles.sider}>\n      {/* \u{1F31F} Logo */}\n      <div className={styles.logo}>\n        <img\n          src=\"https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*eco6RrQhxbMAAAAAAAAAAAAADgCCAQ/original\"\n          draggable={false}\n          alt=\"logo\"\n          width={24}\n          height={24}\n        />\n        <span>Ant Design X</span>\n      </div>\n\n      {/* \u{1F31F} \u6DFB\u52A0\u4F1A\u8BDD */}\n      <Button\n        onClick={() => {\n          if (agent.isRequesting()) {\n            message.error(t.requestInProgress);\n            return;\n          }\n          const now = dayjs().valueOf().toString();\n          setConversations([\n            {\n              key: now,\n              label: `${t.newConversation} ${conversations.length + 1}`,\n              group: t.today,\n            },\n            ...conversations,\n          ]);\n          setCurConversation(now);\n          setMessages([]);\n        }}\n        type=\"link\"\n        className={styles.addBtn}\n        icon={<PlusOutlined />}\n      >\n        {t.newConversation}\n      </Button>\n\n      {/* \u{1F31F} \u4F1A\u8BDD\u7BA1\u7406 */}\n      <Conversations\n        items={conversations}\n        className={styles.conversations}\n        activeKey={curConversation}\n        onActiveChange={val =>\n          __awaiter(void 0, void 0, void 0, function* () {\n            var _a;\n            if (agent.isRequesting()) {\n              message.error(t.requestInProgress);\n              return;\n            }\n            (_a = abortControllerRef.current) === null || _a === void 0 ? void 0 : _a.abort();\n            // The abort execution will trigger an asynchronous requestFallback, which may lead to timing issues.\n            // In future versions, the sessionId capability will be added to resolve this problem.\n            setTimeout(() => {\n              setCurConversation(val);\n              setMessages(\n                (messageHistory === null || messageHistory === void 0\n                  ? void 0\n                  : messageHistory[val]) || [],\n              );\n            }, 100);\n          })\n        }\n        groupable\n        styles={{ item: { padding: '0 8px' } }}\n        menu={conversation => ({\n          items: [\n            {\n              label: t.rename,\n              key: 'rename',\n              icon: <EditOutlined />,\n            },\n            {\n              label: t.delete,\n              key: 'delete',\n              icon: <DeleteOutlined />,\n              danger: true,\n              onClick: () => {\n                var _a;\n                const newList = conversations.filter(item => item.key !== conversation.key);\n                const newKey =\n                  (_a = newList === null || newList === void 0 ? void 0 : newList[0]) === null ||\n                  _a === void 0\n                    ? void 0\n                    : _a.key;\n                setConversations(newList);\n                // The delete operation modifies curConversation and triggers onActiveChange, so it needs to be executed with a delay to ensure it overrides correctly at the end.\n                // This feature will be fixed in a future version.\n                setTimeout(() => {\n                  if (conversation.key === curConversation) {\n                    setCurConversation(newKey);\n                    setMessages(\n                      (messageHistory === null || messageHistory === void 0\n                        ? void 0\n                        : messageHistory[newKey]) || [],\n                    );\n                  }\n                }, 200);\n              },\n            },\n          ],\n        })}\n      />\n\n      <div className={styles.siderFooter}>\n        <Avatar size={24} />\n        <Button type=\"text\" icon={<QuestionCircleOutlined />} />\n      </div>\n    </div>\n  );\n  const chatList = (\n    <div className={styles.chatList}>\n      {(messages === null || messages === void 0 ? void 0 : messages.length) ? (\n        /* \u{1F31F} \u6D88\u606F\u5217\u8868 */\n        <Bubble.List\n          items={\n            messages === null || messages === void 0\n              ? void 0\n              : messages.map(i =>\n                  Object.assign(Object.assign({}, i.message), {\n                    classNames: {\n                      content: i.status === 'loading' ? styles.loadingMessage : '',\n                    },\n                    typing: i.status === 'loading' ? { suffix: <>\u{1F497}</> } : false,\n                  }),\n                )\n          }\n          style={{ height: '100%', paddingInline: 'calc(calc(100% - 700px) /2)' }}\n          roles={{\n            assistant: {\n              placement: 'start',\n              footer: (\n                <div style={{ display: 'flex' }}>\n                  <Button\n                    type=\"text\"\n                    size=\"small\"\n                    icon={<ReloadOutlined />}\n                    onClick={onFooterButtonClick}\n                  />\n                  <Button\n                    type=\"text\"\n                    size=\"small\"\n                    icon={<CopyOutlined />}\n                    onClick={onFooterButtonClick}\n                  />\n                  <Button\n                    type=\"text\"\n                    size=\"small\"\n                    icon={<LikeOutlined />}\n                    onClick={onFooterButtonClick}\n                  />\n                  <Button\n                    type=\"text\"\n                    size=\"small\"\n                    icon={<DislikeOutlined />}\n                    onClick={onFooterButtonClick}\n                  />\n                </div>\n              ),\n              loadingRender: () => <Spin size=\"small\" />,\n            },\n            user: { placement: 'end' },\n          }}\n        />\n      ) : (\n        <Space\n          direction=\"vertical\"\n          size={16}\n          style={{ paddingInline: 'calc(calc(100% - 700px) /2)' }}\n          className={styles.placeholder}\n        >\n          <Welcome\n            variant=\"borderless\"\n            icon=\"https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*s5sNRo5LjfQAAAAAAAAAAAAADgCCAQ/fmt.webp\"\n            title={t.helloAntdXTboxAgent}\n            description={t.antdXTboxDescription}\n            extra={\n              <Space>\n                <Button icon={<ShareAltOutlined />} />\n                <Button icon={<EllipsisOutlined />} />\n              </Space>\n            }\n          />\n          <Flex gap={16}>\n            <Prompts\n              items={[HOT_TOPICS]}\n              styles={{\n                list: { height: '100%' },\n                item: {\n                  flex: 1,\n                  backgroundImage: 'linear-gradient(123deg, #e5f4ff 0%, #efe7ff 100%)',\n                  borderRadius: 12,\n                  border: 'none',\n                },\n                subItem: { padding: 0, background: 'transparent' },\n              }}\n              onItemClick={info => {\n                onSubmit(info.data.description);\n              }}\n              className={styles.chatPrompt}\n            />\n\n            <Prompts\n              items={[DESIGN_GUIDE]}\n              styles={{\n                item: {\n                  flex: 1,\n                  backgroundImage: 'linear-gradient(123deg, #e5f4ff 0%, #efe7ff 100%)',\n                  borderRadius: 12,\n                  border: 'none',\n                },\n                subItem: { background: '#ffffffa6' },\n              }}\n              onItemClick={info => {\n                onSubmit(info.data.description);\n              }}\n              className={styles.chatPrompt}\n            />\n          </Flex>\n        </Space>\n      )}\n    </div>\n  );\n  const chatSender = (\n    <>\n      {/* \u{1F31F} \u63D0\u793A\u8BCD */}\n      <Prompts\n        items={SENDER_PROMPTS}\n        onItemClick={info => {\n          onSubmit(info.data.description);\n        }}\n        styles={{\n          item: { padding: '6px 12px' },\n        }}\n        className={styles.senderPrompt}\n      />\n      {/* \u{1F31F} \u8F93\u5165\u6846 */}\n      <Sender\n        value={inputValue}\n        onSubmit={() => {\n          onSubmit(inputValue);\n          setInputValue('');\n        }}\n        onChange={setInputValue}\n        onCancel={() => {\n          var _a;\n          (_a = abortControllerRef.current) === null || _a === void 0 ? void 0 : _a.abort();\n        }}\n        loading={loading}\n        className={styles.sender}\n        actions={(_, info) => {\n          const { SendButton, LoadingButton } = info.components;\n          return (\n            <Flex gap={4}>\n              {loading ? <LoadingButton type=\"default\" /> : <SendButton type=\"primary\" />}\n            </Flex>\n          );\n        }}\n        placeholder={t.askMeAnything}\n      />\n    </>\n  );\n  useEffect(() => {\n    // history mock\n    if (messages === null || messages === void 0 ? void 0 : messages.length) {\n      setMessageHistory(prev =>\n        Object.assign(Object.assign({}, prev), { [curConversation]: messages }),\n      );\n    }\n  }, [messages]);\n  // ==================== Render =================\n  return (\n    <div className={styles.layout}>\n      {chatSider}\n\n      <div className={styles.chat}>\n        {chatList}\n        {chatSender}\n      </div>\n    </div>\n  );\n};\nexport default Independent;\n"}})})})});};},"1465e33e":function(n,e,t){"use strict";t.d(e,"__esModule",{value:!0}),t.d(e,"texts",{enumerable:!0,get:function(){return s;}}),t("de5c5148");let s=[];}}]);
//# sourceMappingURL=0438a5ac-async.ef08f0b8.js.map