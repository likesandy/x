(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]||[]).push([["62e6f718"],{"251db48a":function(e,n,s){"use strict";s.d(n,"__esModule",{value:!0}),s.d(n,"texts",{enumerable:!0,get:function(){return t;}}),s("134501d0");let t=[{value:"\u8FD9\u7BC7\u6307\u5357\u5C06\u4ECB\u7ECD\u5982\u4F55\u5728\u4F7F\u7528 Ant Design X \u642D\u5EFA\u7684\u5E94\u7528\u4E2D\u63A5\u5165 Qwen \u63D0\u4F9B\u7684\u6A21\u578B\u670D\u52A1\u3002",paraId:0},{value:"Qwen \u7684\u6A21\u578B\u63A8\u7406\u670D\u52A1\u652F\u6301\u300C\u517C\u5BB9 OpenAI \u6A21\u5F0F\u300D\u3002\u8BE6\u89C1\u5B98\u65B9\u6587\u6863: ",paraId:1},{value:"\u963F\u91CC\u4E91 - \u901A\u4E49\u5343\u95EE",paraId:1},{value:"\u5982\u4F55\u83B7\u53D6 baseURL - ",paraId:2,tocIndex:0},{value:"https://help.aliyun.com/zh/model-studio/getting-started/what-is-model-studio",paraId:2,tocIndex:0},{value:"\u5982\u4F55\u83B7\u53D6 API Key - ",paraId:2,tocIndex:0},{value:"https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key",paraId:2,tocIndex:0},{value:"\u6A21\u578B\u5217\u8868 - ",paraId:2,tocIndex:0},{value:"https://help.aliyun.com/zh/model-studio/getting-started/models",paraId:2,tocIndex:0},{value:"\u662F\u6307\u5728\u63A5\u53E3\u8BBE\u8BA1\u548C\u4F7F\u7528\u65B9\u5F0F\u4E0A\u4E0E OpenAI \u7684 API \u4FDD\u6301\u4E00\u81F4\u7684\u6A21\u578B\u63A8\u7406\u670D\u52A1\u3002",paraId:3,tocIndex:1},{value:"\u8FD9\u610F\u5473\u7740\u5F00\u53D1\u8005\u53EF\u4EE5\u4F7F\u7528\u4E0E\u8C03\u7528 OpenAI \u6A21\u578B\u76F8\u540C\u7684\u4EE3\u7801\u548C\u65B9\u6CD5\uFF0C\u6765\u8C03\u7528\u8FD9\u4E9B\u517C\u5BB9\u670D\u52A1\uFF0C\u4ECE\u800C\u51CF\u5C11\u5F00\u53D1\u63A5\u5165\u6210\u672C\u3002",paraId:4,tocIndex:1},{value:"\u6CE8\u610F: \u{1F525} ",paraId:5,tocIndex:2},{value:"dangerouslyAllowBrowser",paraId:5,tocIndex:2},{value:" \u5B58\u5728\u5B89\u5168\u98CE\u9669\uFF0C\u5BF9\u6B64 openai-node \u7684\u5B98\u65B9\u6587\u6863\u6709\u8BE6\u7EC6\u7684",paraId:5,tocIndex:2},{value:"\u8BF4\u660E",paraId:5,tocIndex:2},{value:"\u3002",paraId:5,tocIndex:2},{value:"import { useXAgent, useXChat, Sender, Bubble } from '@ant-design/x';\nimport OpenAI from 'openai';\nimport React from 'react';\n\nconst client = new OpenAI({\n  baseURL: 'https://dashscope.aliyuncs.com/compatible-mode/v1',\n  apiKey: process.env['DASHSCOPE_API_KEY'],\n  dangerouslyAllowBrowser: true,\n});\n\nconst Demo: React.FC = () => {\n  const [agent] = useXAgent({\n    request: async (info, callbacks) => {\n      const { messages, message } = info;\n\n      const { onSuccess, onUpdate, onError } = callbacks;\n\n      // current message\n      console.log('message', message);\n\n      // history messages\n      console.log('messages', messages);\n\n      let content: string = '';\n\n      try {\n        const stream = await client.chat.completions.create({\n          model: 'qwen-plus',\n          // if chat context is needed, modify the array\n          messages: [{ role: 'user', content: message }],\n          // stream mode\n          stream: true,\n        });\n\n        for await (const chunk of stream) {\n          content += chunk.choices[0]?.delta?.content || '';\n\n          onUpdate(content);\n        }\n\n        onSuccess(content);\n      } catch (error) {\n        // handle error\n        // onError();\n      }\n    },\n  });\n\n  const {\n    // use to send message\n    onRequest,\n    // use to render messages\n    messages,\n  } = useXChat({ agent });\n\n  const items = messages.map(({ message, id }) => ({\n    // key is required, used to identify the message\n    key: id,\n    content: message,\n  }));\n\n  return (\n    <div>\n      <Bubble.List items={items} />\n      <Sender onSubmit={onRequest} />\n    </div>\n  );\n};\n\nexport default Demo;\n",paraId:6,tocIndex:2},{value:"\u6CE8\u610F: \u{1F525} ",paraId:7,tocIndex:3},{value:"dangerouslyApiKey",paraId:7,tocIndex:3},{value:" \u5B58\u5728\u5B89\u5168\u98CE\u9669\uFF0C\u5BF9\u6B64\u6709\u8BE6\u7EC6\u7684",paraId:7,tocIndex:3},{value:"\u8BF4\u660E",paraId:8,tocIndex:3},{value:"\u3002",paraId:7,tocIndex:3},{value:"import { useXAgent, useXChat, Sender, Bubble, XRequest } from '@ant-design/x';\nimport React from 'react';\n\nconst { create } = XRequest({\n  baseURL: 'https://dashscope.aliyuncs.com/compatible-mode/v1',\n  dangerouslyApiKey: process.env['DASHSCOPE_API_KEY'],\n  model: 'qwen-plus',\n});\n\nconst Component: React.FC = () => {\n  const [agent] = useXAgent({\n    request: async (info, callbacks) => {\n      const { messages, message } = info;\n      const { onUpdate } = callbacks;\n\n      // current message\n      console.log('message', message);\n      // messages list\n      console.log('messages', messages);\n\n      let content: string = '';\n\n      try {\n        create(\n          {\n            messages: [{ role: 'user', content: message }],\n            stream: true,\n          },\n          {\n            onSuccess: (chunks) => {\n              console.log('sse chunk list', chunks);\n            },\n            onError: (error) => {\n              console.log('error', error);\n            },\n            onUpdate: (chunk) => {\n              console.log('sse object', chunk);\n\n              const data = JSON.parse(chunk.data);\n\n              content += data?.choices[0].delta.content;\n\n              onUpdate(content);\n            },\n          },\n        );\n      } catch (error) {}\n    },\n  });\n\n  const {\n    // use to send message\n    onRequest,\n    // use to render messages\n    messages,\n  } = useXChat({ agent });\n\n  const items = messages.map(({ message, id }) => ({\n    // key is required, used to identify the message\n    key: id,\n    content: message,\n  }));\n\n  return (\n    <div>\n      <Bubble.List items={items} />\n      <Sender onSubmit={onRequest} />\n    </div>\n  );\n};\n\nexport default Component;\n",paraId:9,tocIndex:3}];},"62e6f718":function(e,n,s){"use strict";s.d(n,"__esModule",{value:!0}),s.d(n,"default",{enumerable:!0,get:function(){return u;}});var t=s("777fffbe"),a=s("8090cfc0"),o=t._(s("33c468da")),d=t._(s("ddea4080")),l=t._(s("b710171f")),r=s("3e6b097d"),c=s("3a2876c3"),i=s("251db48a"),u=function(){return(0,a.jsx)(c.DumiPage,{children:(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(l.default,{}),children:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"markdown",children:[(0,a.jsx)("p",{children:i.texts[0].value}),(0,a.jsxs)("p",{children:[i.texts[1].value,(0,a.jsx)(d.default,{href:"https://help.aliyun.com/zh/model-studio/developer-reference/compatibility-of-openai-with-dashscope",sourceType:"a",children:i.texts[2].value})]}),(0,a.jsxs)("h3",{id:"\u76F8\u5173\u53C2\u6570\u83B7\u53D6",children:[(0,a.jsx)(d.default,{"aria-hidden":"true",tabIndex:"-1",href:"#\u76F8\u5173\u53C2\u6570\u83B7\u53D6",sourceType:"a",children:(0,a.jsx)("span",{className:"icon icon-link"})}),"\u76F8\u5173\u53C2\u6570\u83B7\u53D6"]}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[i.texts[3].value,(0,a.jsx)(d.default,{href:"https://help.aliyun.com/zh/model-studio/getting-started/what-is-model-studio",sourceType:"a",children:i.texts[4].value})]}),(0,a.jsxs)("li",{children:[i.texts[5].value,(0,a.jsx)(d.default,{href:"https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key",sourceType:"a",children:i.texts[6].value})]}),(0,a.jsxs)("li",{children:[i.texts[7].value,(0,a.jsx)(d.default,{href:"https://help.aliyun.com/zh/model-studio/getting-started/models",sourceType:"a",children:i.texts[8].value})]})]}),(0,a.jsxs)("h3",{id:"\u4EC0\u4E48\u662F\u517C\u5BB9-openai-\u6A21\u5F0F",children:[(0,a.jsx)(d.default,{"aria-hidden":"true",tabIndex:"-1",href:"#\u4EC0\u4E48\u662F\u517C\u5BB9-openai-\u6A21\u5F0F",sourceType:"a",children:(0,a.jsx)("span",{className:"icon icon-link"})}),"\u4EC0\u4E48\u662F\u300C\u517C\u5BB9 OpenAI \u6A21\u5F0F\u300D\uFF1F"]}),(0,a.jsx)("p",{children:i.texts[9].value}),(0,a.jsx)("p",{children:i.texts[10].value}),(0,a.jsxs)("h2",{id:"\u4F7F\u7528-openai-node-\u517C\u5BB9\u8C03\u7528",children:[(0,a.jsx)(d.default,{"aria-hidden":"true",tabIndex:"-1",href:"#\u4F7F\u7528-openai-node-\u517C\u5BB9\u8C03\u7528",sourceType:"a",children:(0,a.jsx)("span",{className:"icon icon-link"})}),"\u4F7F\u7528 openai-node \u517C\u5BB9\u8C03\u7528"]}),(0,a.jsx)("blockquote",{children:(0,a.jsxs)("p",{children:[i.texts[11].value,(0,a.jsx)("code",{children:i.texts[12].value}),i.texts[13].value,(0,a.jsx)(d.default,{href:"https://github.com/openai/openai-node?tab=readme-ov-file#requirements",sourceType:"a",children:i.texts[14].value}),i.texts[15].value]})}),(0,a.jsx)(o.default,{lang:"tsx",children:i.texts[16].value}),(0,a.jsxs)("h2",{id:"\u4F7F\u7528-api-\u63A5\u5165",children:[(0,a.jsx)(d.default,{"aria-hidden":"true",tabIndex:"-1",href:"#\u4F7F\u7528-api-\u63A5\u5165",sourceType:"a",children:(0,a.jsx)("span",{className:"icon icon-link"})}),"\u4F7F\u7528 API \u63A5\u5165"]}),(0,a.jsx)("blockquote",{children:(0,a.jsxs)("p",{children:[i.texts[17].value,(0,a.jsx)("code",{children:i.texts[18].value}),i.texts[19].value,(0,a.jsx)(d.default,{to:"/docs/react/dangerously-api-key-cn",sourceType:"Link",children:i.texts[20].value}),i.texts[21].value]})}),(0,a.jsx)(o.default,{lang:"tsx",children:i.texts[22].value})]})})})});};}}]);
//# sourceMappingURL=62e6f718-async.65764dbc.js.map